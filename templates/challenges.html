<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Challenges | Expanzo</title>
<link rel="stylesheet" href="/static/challenges.css">
</head>

<body>
<div class="bg-shape one"></div>
<div class="bg-shape two"></div>

<div class="container">

    <!-- SIDEBAR -->
    <div class="sidebar">
        <h2 class="logo">Expanzo</h2>
        <ul>
            <li><a href="/dashboard" style="color:inherit; text-decoration:none;">Dashboard</a></li>
            <li><a href="/transactions" style="color:inherit; text-decoration:none;">Transactions</a></li>
            <li><a href="/Report_Analysis" style="color:inherit; text-decoration:none;">Report & Analysis</a></li>
            <li class="active"><a href="/challenges" style="color:inherit; text-decoration:none;">Challenges</a></li>
            <li><a href="/chatbot" style="color:inherit; text-decoration:none;">Chatbot</a></li>
            <li><a href="/settings" style="color:inherit; text-decoration:none;">Settings</a></li>
        </ul>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main">

        <!-- TOP BAR -->
        <div class="top-card">
            <div>
                <h1>ğŸ¯ Challenges</h1>
                <p>Auto-tracked based on your spending</p>
            </div>
            <div class="points-box">
                ğŸ† XP: {{ points }}<br>
                <small>Level {{ level }} â€” {{ rank }}</small>
            </div>
        </div>

        <!-- LIMIT SETTINGS -->
        <div class="budget-card">
            <h2>âš™ Set Your Limits</h2>
            <form action="/set_limits" method="POST" class="budget-form">
                <input type="number" name="food_limit" placeholder="Food Limit â‚¹" required>
                <input type="number" name="travel_limit" placeholder="Travel Limit â‚¹" required>
                <input type="number" name="monthly_budget" placeholder="Monthly Budget â‚¹" required>
                <button type="submit">Save Limits</button>
            </form>
        </div>

        <!-- LIMIT DISPLAY -->
        <div class="limit-display">
            ğŸ” Food Limit â‚¹{{ limits.food_limit if limits else 0 }} |
            ğŸš— Travel Limit â‚¹{{ limits.travel_limit if limits else 0 }} |
            ğŸ’° Budget â‚¹{{ limits.monthly_budget if limits else 0 }}
        </div>

        <!-- EASY CHALLENGES -->
        <div class="challenge-section">
            <h2 class="section-title">ğŸŸ¢ Easy Challenges</h2>

            <div class="challenge-row">

                <div class="challenge-card easy {% if 'food_control' in done_challenges %}completed{% endif %}">
                    <div class="food overlay">
                        <h3>Food Control</h3>
                        <span class="points">+5 XP</span>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: {{ progress.food }}%"></div>
                        </div>
                        <small>{{ progress.food }}% of limit used</small>
                    </div>
                </div>

                <div class="challenge-card easy {% if 'travel_saver' in done_challenges %}completed{% endif %}">
                    <div class="travel overlay">
                        <h3>Travel Saver</h3>
                        <span class="points">+10 XP</span>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: {{ progress.travel }}%"></div>
                        </div>
                        <small>{{ progress.travel }}% of limit used</small>
                    </div>
                </div>

            </div>
        </div>

        <!-- HARD CHALLENGE (NOW CORRECTLY INSIDE MAIN) -->
        <h2 class="section-title">ğŸ”´ Hard Challenge</h2>
        <div class="challenge-row single">
            <div class="challenge-card hard {% if 'budget_master' in done_challenges %}completed{% endif %}">
                <div class="overlay savings">
                    <h3>Budget Master</h3>
                    <p>Keep expenses under your monthly budget</p>
                    <span class="points">+15 XP</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{ progress.budget }}%"></div>
                    </div>
                    <small>{{ progress.budget }}% used</small>
                </div>
            </div>
        </div>

    </div> <!-- END MAIN -->
</div> <!-- END CONTAINER -->
</body>
</html>
